<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Projekt 5</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="manifest" href="manifest.json" />
    <script src="https://cdn.jsdelivr.net/npm/idb-keyval@6/+esm"></script>


  </head>
  <body>
    <header>
      <img src="assets/img/glazba1_71.png" alt="Header1" />
      <h1>Projekt 5 iz predmeta Napredni razvoj programske potpore za web</h1>
      <img src="assets/img/music_icon_71.png" alt="Header2" />
    </header>

    <div class="main-container">
      <div class="section">
        <h3>Dio o glazbenim tonovima i ljestvicama</h3>
        <div class="music-section">
          <div class="music-text">
            Kako ljudi u svom jeziku razlikuju slova koja čine abecedu slova,
            tako se u glazbi sporazumijeva glazbenom abecedom. Nju čine glazbene
            note, predznaci, ključevi i tako dalje. To je univerzalni jezik
            kojim se glazbenici širom svijeta razumiju.
          </div>
          <div class="music-pictures">
            <figure>
              <img
                src="assets/img/violinski_kljuc_140.jpg"
                alt="Violinski kljuc"
              />
              <figcaption>Violinski ključ</figcaption>
            </figure>
            <figure>
              <img src="assets/img/bass_kljuc_140.png" alt="Bas kljuc" />
              <figcaption>Bas ključ</figcaption>
            </figure>
          </div>
          <br />

          <div class="music-text">
            Glazbeni tonovi grupiraju se u glazbene ljestvice. One su svojevrsna
            gramatika i određuju pravila po kojima se tonovi slažu i koriste
            ovisno o kontekstu u kojem se nalaze, odnosno ovisno o glazbenoj
            ljestvici koja se koristi. Osnovna podjela glazbenih ljestvica je na
            durske i molske, gdje svaka durska ljestvica ima svoju pripadajuću
            molsku ljestvicu s kojom dijeli predznake. Osnovna glazbena
            ljestvica je c-dur (C-major), a njoj pripadajuća molska ljestvica je
            a-mol (a-minor).
          </div>
          <div class="music-pictures">
            <figure>
              <img src="assets/img/kvintni_krug_200.png" alt="Kvintni krug" />
              <figcaption>Kvintni krug</figcaption>
            </figure>
          </div>
          <br />
          <div class="music-text">
            Glazbeni tonovi zapisuju se notama u notno crtovlje gdje svaki ton
            ima svoju poziciju. Note se razlikuju po trajanju pa tako
            razlikujemo četvrtinke, osminke, cijele note i druge. Kako traju
            note tako traju i pauze pa razlikujemo cjelu pauzu, polovinsku
            pauzu, četvrtinsku pauzu i druge. Njihovo trajanje ovisi o glazbenoj
            mjeri koja se uvijek nalazi na početku notnog zapisa skladbe.
          </div>
          <div class="music-pictures">
            <figure>
              <img
                src="assets/img/note_pauze_240.jpg"
                alt="Osnovne note i pauze"
              />
              <figcaption style="width: 280px">
                Osnovne note (cijela nota, polovinka, četvrtinka, osminka i
                šesnaestinka) i pauze (cijela, polovinska, osminska i
                šestaestinska)
              </figcaption>
            </figure>
          </div>
        </div>
      </div>
      <div class="section">
        <h3>Dio o glazbenim instrumentima</h3>
        <div class="music-section">
          <div class="music-text">
            Poveznica glazbe i ljudskog govora može se naći i u načinu
            izgovaranja glasova, odnosno načina sviranja tonova. Ljudi
            komuniciraju glasom, odnosno izgovaraju glasove. Naravno da ih i
            zapisuju, ali pretežno koriste glasove. U glazbi, ekvivalent
            ljudskom izgovaranju glasova je sviranje tonova instrumentima.
          </div>
          <br />
          <div class="music-text">
            Instrumenti su sredstva pomoću kojih se svira glazba. Osnovna je
            podjela na <b>puhačke</b>, <b>žičane</b>, <b>udaraljke</b> te
            <b>glazbala s tipkama</b>.
          </div>
          <br />
          <div class="music-text">
            Kod puhačkih instrumenata zvuk se proizvodi zrakom iz čovjekovih
            pluća, taj zrak onda struji instrumentom i proizvodi zvuk. Neki od
            primjera su truba, flauta, trombon...
          </div>
          <div class="music-picture-audio">
            <div class="music-pictures">
              <figure>
                <img src="assets/img/puhacki_240.png" alt="Puhački" />
                <figcaption>Primjer puhačkih instrumenata</figcaption>
              </figure>
            </div>
            <div class="links">
              <div><b>Primjeri zvuka instrumenata</b></div>
              <div>
                <a href="https://www.youtube.com/watch?v=MDXGKx-E-iE">Truba</a>
              </div>
              <br />
              <div>
                <a
                  href="https://www.youtube.com/watch?v=NEzSJW8s-V8&pp=ygULZmx1dGUgc291bmQ%3D"
                  >Flauta</a
                >
              </div>
              <br />
              <div>
                <a
                  href="https://www.youtube.com/watch?v=8-fkvWFSeYc&pp=ygUOdHJvbWJvbmUgc291bmQ%3D"
                  >Trombon</a
                >
              </div>
              <br />
              <div>
                <a href="https://www.youtube.com/watch?v=OKfxvyXEe-Q"
                  >Saksofon</a
                >
              </div>
              <br />
              <div>
                <a
                  href="https://www.youtube.com/watch?v=kSfEDb1cMAw&pp=ygUPY2xhcmluZXQgIHNvdW5k"
                  >Klarinet</a
                >
              </div>
            </div>
          </div>
          <br />
          <div class="music-text">
            Na žičanim se instrumentima zvuk proizvodi titranjem žice. Primjeri
            instrumenata su gitara, violončelo, violina...
          </div>
          <br>
          <div class="music-picture-audio">
            <div class="music-pictures">
              <figure>
                <img src="assets/img/zicani_240.jpg" alt="Žičani" />
                <figcaption>Primjer žičanih instrumenata</figcaption>
              </figure>
            </div>
            <div class="links">
              <div><b>Primjeri zvuka instrumenata</b></div>
              <div>
                <a href="https://www.youtube.com/watch?v=xBfBYfPNXqE">Gitara</a>
              </div>
              <br />
              <div>
                <a
                  href="https://www.youtube.com/watch?v=wh-pBxeHE3U&pp=ygUMdmlvbGluIHNvdW5k"
                  >Violina</a
                >
              </div>
              <br />
              <div>
                <a
                  href="https://www.youtube.com/watch?v=5q7YJhVmE08&pp=ygULY2VsbG8gc291bmQ%3D"
                  >Violončelo</a
                >
              </div>
            </div>
            </div>
          </div>
          <br />
          <div class="music-text">
            Glazbenik koji svira udaraljke zvuk proizvodi udaranjem o opnu
            instrumenta. Primjeri su timpani, ksilofon...
          </div>
          <div class="music-picture-audio">
          <div class="music-pictures">
            <figure>
              <img src="assets/img/udaraljke_240.png" alt="Udaraljke" />
              <figcaption>Primjer udaraljki</figcaption>
            </figure>
          </div>
          <div class="links">
            <div><b>Primjeri zvuka instrumenata</b></div>
            <div>
              <a href="https://www.youtube.com/watch?v=pjP-U3x_uk8&pp=ygUOdGltcGFuaSBzb3VuZCA%3D">Timpani</a>
            </div>
            <br />
            <div>
              <a
                href="https://www.youtube.com/watch?v=IsfEj_7SKtQ&pp=ygUQeHlsb3Bob25lIHNvdW5kIA%3D%3D"
                >Ksilofon</a
              >
            </div>
            <br>
            <div>
              <a
                href="https://www.youtube.com/watch?v=3v7QC6Bl_7E"
                >Marimba</a
              >
            </div>
          </div>
        </div>
          <br />
          <div class="music-text">
            Kod instrumenata s tipkama zvuk se proizviodi pritiskom na tipku pa
            onda ili mali bat udara o žicu kao kod klavira ili zrak struji
            instrumentom pa se tako proizvodi zvuk kao kod harmonike.
          </div>
          <br>
          <div class="music-picture-audio">
          <div class="music-pictures">
            <figure>
              <img src="assets/img/tipke_240.jpg" alt="Harmonika" />
              <figcaption>Primjer glazbala s tipkama</figcaption>
            </figure>
          </div>
          <div class="links">
            <div><b>Primjeri zvuka instrumenata</b></div>
            <div>
              <a href="https://www.youtube.com/watch?v=KA0Yh1OxJVI&pp=ygULcGlhbm8gc291bmQ%3D">Klavir</a>
            </div>
            <br />
            <div>
              <a
                href="https://www.youtube.com/watch?v=MFkoFG_v5M8"
                >Harmonika</a
              >
            </div>
            
          </div>
        </div>
        </div>
      </div>
      <div class="user-audio">
        <div class="section">
        <h3>Dio za korisnikov audio</h3>
        <p>Snimanje audiozapisa koristeći Audio API</p>
        <button id="audio-record-start">Početak</button>
        <button id="audio-record-stop" disabled>Kraj</button>
        <audio controls id="audio-record"></audio>
      </div>
    </div>
    </div>
    <div id="displayData" style="text-align: center;"></div>
    <div class="music-pictures">
    <form id="data-form">
      <label for="name">Ime: </label>
      <input type="text" id="name" name="name" required>
      <br>
      <label for="surname">Prezime: </label>
      <input type="text" id="surname" name="surname" required>
      <br>
      <button type="button" id="saveButton">Spremi</button>
      <button type="button" id="displayButton">Prikaži podatke</button>
    </form>
  </div>

    <script>
      navigator.serviceWorker
        .register("./sw.js", {type: "module"})
        .then((reg) => console.log(""))
        .catch((err) => console.error("Greška", err));
    </script>
    
    <script type="module">
      import { get, set, entries } from 'https://cdn.jsdelivr.net/npm/idb-keyval@6/+esm';
      function saveData() {
        const name = document.getElementById("name").value;
        const surname = document.getElementById("surname").value;
        
        set(name, {
            name: name,
            surname: surname
        }).then(() => {
        });
  
      
        if ("serviceWorker" in navigator && "SyncManager" in window) {
          navigator.serviceWorker.ready.then(swRegistration => {
            return swRegistration.sync.register("syncFormData");
          }).then(() => {
          }).catch(err => console.log("Backgroung sync failed!"))
        } 

        const nameInput = document.getElementById("name");
        const surnameInput = document.getElementById("surname");
        nameInput.value = "";
        surnameInput.value = "";
      }

      function displayData() {
        const displayDiv = document.getElementById("displayData");
        entries().then(entries => {
            displayDiv.innerHTML = "";
            entries.forEach(entry => {
              const key = entry[0];
              const value = entry[1];
              displayDiv.innerHTML += `<p>${value.name}, ${value.surname}</p>`;
              //displayDiv.innerHTML += `<br />`
            })
        })
        const name = document.getElementById("name");
        const surname = document.getElementById("surname");
        name.value = "";
        surname.value = "";
      }
      
      document.addEventListener("DOMContentLoaded", () => {
      const saveButton = document.getElementById("saveButton");
      saveButton.addEventListener("click", saveData);
      const displayButton = document.getElementById("displayButton");
      displayButton.addEventListener("click", displayData);
  });
    </script>  

    <script>
      // document.addEventListener("DOMContentLoaded", () => {

      const snimanjeStart = document.getElementById("audio-record-start");
      const snimanjeStop = document.getElementById("audio-record-stop");
      const snimanje = document.getElementById("audio-record");
      let snimka;
      let dijelovi = [];

      navigator.mediaDevices
        .getUserMedia({ audio: true })
        .then((stream) => {
          snimka = new MediaRecorder(stream);

          snimka.ondataavailable = (event) => {
            if (event.data.size > 0) {
              dijelovi.push(event.data);
            }
          };

          snimka.onstop = () => {
            const audio = new Blob(dijelovi, { type: "audio/wav" });
            const audioUrl = URL.createObjectURL(audio);
            snimanje.src = audioUrl;
            snimanje.controls = true;
            snimanje.style.display = "block";
            dijelovi = [];
          };
        })
        .catch((error) => console.error("Greška kod snimanja"));

      snimanjeStart.addEventListener("click", () => {
        snimka.start();
        snimanjeStart.disabled = true;
        snimanjeStop.disabled = false;
      });

      snimanjeStop.addEventListener("click", () => {
        snimka.stop();
        snimanjeStart.disabled = false;
        snimanjeStop.disabled = true;
      });
      //});
    </script>
    <script src="server.js"></script>
  </body>
</html>
